<config
  xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
  xmlns='http://www.ehcache.org/v3'
  xmlns:jsr107='http://www.ehcache.org/v3/jsr107'
  xsi:schemaLocation="
    http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.8.xsd
    http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.8.xsd
">

  <!-- See https://www.ehcache.org/documentation/3.8/xml.html for documentation -->

  <service>
    <jsr107:defaults enable-management="false" enable-statistics="true" default-template="default" />
  </service>

  <!-- Persistent cache directory -->
  <persistence directory="shogun-ehcache"/>

  <!-- Default cache template -->
  <cache-template name="default">
    <expiry>
      <none/>
    </expiry>
    <listeners>
      <listener>
        <class>de.terrestris.shogun.lib.listener.CacheLogger</class>
        <event-firing-mode>ASYNCHRONOUS</event-firing-mode>
        <event-ordering-mode>UNORDERED</event-ordering-mode>
        <events-to-fire-on>CREATED</events-to-fire-on>
        <events-to-fire-on>EXPIRED</events-to-fire-on>
        <events-to-fire-on>EVICTED</events-to-fire-on>
        <events-to-fire-on>REMOVED</events-to-fire-on>
        <events-to-fire-on>UPDATED</events-to-fire-on>
      </listener>
    </listeners>

    <!-- See https://www.ehcache.org/documentation/3.8/tiering.html#multiple-tier-setup -->
    <resources>
      <!-- Calculation of the heap size has an impact on the performance, make use of entries here -->
      <heap unit="entries">1000</heap>
      <offheap unit="MB">10</offheap>
      <!-- Note: Data cached in the disk tier will persist even if the JVM stops! -->
      <disk persistent="false" unit="MB">100</disk>
    </resources>
  </cache-template>

  <cache alias="permissionCollectionCache" uses-template="default" />
  <cache alias="applicationCache" uses-template="default" />

</config>
